{% extends 'base.html' %}
{% load static %}

{% block style %}
  <link rel="stylesheet" href="{% static 'accounts/my_page.css' %}?after">
{% endblock style %}

{% block content %}
  <h3>Hi, {{ person.first_name }}!</h3>
  <div class="details_box m-5">
    <details>
      <summary>내가 작성한 약속</summary>
      {% for plan in person.plan_set.all %}
        <a class="d-flex justify-content-start text-decoration-none text-black" href="{% url 'plans:plan_detail' plan.pk %}">
          <p class="plan_title">{{ plan.title }}</p>
          <p class="plan_date">({{ plan.date }})</p>
        </a>   
      {% endfor %}
    </details>  

    <details>
      <summary>앞으로 예정된 약속</summary>
      {% if not coming_plans %}
        <p>예정된 약속이 없습니다</p>
      {% endif %}
      {% for plan in coming_plans %}
        <a class="d-flex justify-content-start text-decoration-none text-black" href="{% url 'plans:plan_detail' plan.pk %}">
          <p class="plan_title">{{ plan.title }}</p>
          <p class="plan_date">({{ plan.date }})</p>
        </a>   
      {% endfor %}
    </details>

    <details>
      <summary style="float-left">
        <div class="d-flex justify-content-start">
          <p>내가 참석한 약속</p>
          <p class="num_badge">{{ passed_plans|length }}개</p>
        </div>
      </summary>
      {% if not passed_plans %}
        <p>참석한 약속이 없습니다</p>
      {% endif %}
      {% for plan in passed_plans %}
        <a class="d-flex justify-content-start text-decoration-none text-black" href="{% url 'plans:plan_detail' plan.pk %}">
          <p class="plan_title">{{ plan.title }}</p>
          <p class="plan_date">({{ plan.date }})</p>
        </a>   
      {% endfor %}
    </details>  
  </div>

{% endblock content %}



